<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Cafe Review - AI Reviews</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    .bg-header { background-color: rgb(193, 55, 55) !important; }
    .copy-btn { cursor: pointer; }
  </style>
</head>
<body class="bg-light">

  <!-- Header -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-header px-3">
    <a class="navbar-brand d-flex align-items-center" href="#">
      <img src="Logonew.png" alt="Logo" width="40" height="40" class="me-2">
      Cafe Review
    </a>
  </nav>

  <div class="container my-5">
    <h3 class="mb-4 text-center">AI Generated Reviews</h3>
    <div id="loading" class="text-center text-muted">Generating reviews...</div>
    <ul class="list-group" id="resultList"></ul>

    <div class="text-center mt-4">
      <a href="review.html" class="btn btn-outline-primary">Go Back</a>
    </div>
  </div>

  <script>
    const urlParams = new URLSearchParams(window.location.search);
    const rating = urlParams.get("rating");
    const items = urlParams.getAll("items");

    async function generateReviews() {
      try {
const prompt = `Write 5 short cafe reviews based on the following details:
Rating: ${rating} stars.
Checklist highlights: ${items.length ? items.join(", ") : "none"}.
Format: Do not show star symbols, just the review text Style: Mix of Google-style and Zomato-style reviews Tone: Honest, concise, and easy to read Generate 5 reviews in this format.`;

        const response = await fetch("https://api.openai.com/v1/chat/completions", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
            "Authorization": "Bearer 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" // replace with your key
          },
          body: JSON.stringify({
            model: "gpt-4o-mini",
            messages: [{ role: "user", content: prompt }]
          })
        });

        const data = await response.json();
        const reviewsText = data.choices[0].message.content;

        const reviews = reviewsText.split(/\n+/).filter(line => line.trim() !== "");
        const resultList = document.getElementById("resultList");
        document.getElementById("loading").style.display = "none";

        reviews.forEach((review) => {
          const li = document.createElement("li");
          li.className = "list-group-item d-flex justify-content-between align-items-start";
          li.innerHTML = `
            <div class="me-2">${review}</div>
            <button class="btn btn-sm btn-outline-secondary copy-Google" data-text="${review}">Post Review On Google</button>
            <button class="btn btn-sm btn-outline-secondary copy-Zomato" data-text="${review}">Post Review On Zomato</button>
          `;
          resultList.appendChild(li);
        });

        // Copy button
        document.querySelectorAll(".copy-Google").forEach(btn => {
          btn.addEventListener("click", () => {
            navigator.clipboard.writeText(btn.dataset.text);
            btn.textContent = "Copied!";
            setTimeout(() => (btn.textContent = "Copy"), 2000);
            window.location.href = "https://www.google.com/search?q=sg+cafe+reviews&client=ms-android-oneplus-rvo3&sca_esv=eb1dff64004fdd40&cs=0&biw=1528&bih=738&authuser=2&sxsrf=AE3TifOYloyRMrMN1oApqpyh1H5qUj1jOQ%3A1758907374986&ei=7svWaJvzO4e_vr0P_M3x0As&oq=&gs_lp=EhNtb2JpbGUtZ3dzLXdpei1zZXJwIgAqAggAMgcQIxgnGOoCMgoQABgDGOoCGI8BMgoQABgDGOoCGI8BMgoQABgDGOoCGI8BMgoQABgDGOoCGI8BMgoQABgDGOoCGI8BMgoQLhgDGOoCGI8BMgoQABgDGOoCGI8BMgoQABgDGOoCGI8BMgoQABgDGOoCGI8BMgoQABgDGOoCGI8BMgoQABgDGOoCGI8BMgoQABgDGOoCGI8BMgoQABgDGOoCGI8BMgoQABgDGOoCGI8BSI8QUABYAHACeACQAQCYAQCgAQCqAQC4AQHIAQD4AQGYAgKgAgyoAg-YAwnxBQ-imnAP1gOdkgcBMqAHALIHALgHAMIHBzAuMS4wLjHIBws&sclient=mobile-gws-wiz-serp#lrd=0x3be7ebc5a045a8c5:0x9224ef4bcf38e188,3,,,,";
 // redirect
          });
        });
     document.querySelectorAll(".copy-Zomato").forEach(btn => {
          btn.addEventListener("click", () => {
            navigator.clipboard.writeText(btn.dataset.text);
            btn.textContent = "Copied!";
            setTimeout(() => (btn.textContent = "Copy"), 2000);
            window.location.href = "https://link.zomato.com/xqzv/rshare?id=117301698c2eb963b"; // redirect
          });
        });

      } catch (error) {
        document.getElementById("loading").textContent = "Error generating reviews.";
        console.error(error);
      }
    }

    generateReviews();
  </script>
</body>
</html>


